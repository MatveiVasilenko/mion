{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/MotichProduction/motich/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MotichProduction/motich/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport HeaderItem from '../../../../widgets/headerOffice/HeaderItem';\nimport ContextApp from './../../../../context/App/ContextApp';\nimport { NET } from './../../../../network';\nimport useWindowDimensions from './../../../../global/utils';\nimport svgSprite from './../../../../project/svg/svgSprite';\n\nvar MainHead = function MainHead(_ref) {\n  var classes = _ref.classes;\n\n  var _useContext = useContext(ContextApp),\n      stateApp = _useContext.stateApp;\n\n  var user = stateApp.user;\n\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width;\n\n  var mobile = width < 768 ? true : false;\n\n  var _useState = useState(null),\n      userData = _useState[0],\n      setUserData = _useState[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var cleanupFunction;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cleanupFunction = false;\n\n            if (user) {\n              _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        fetch(\"\".concat(NET.BACK_URL, \"/refferals/\").concat(user.id), {\n                          method: 'GET',\n                          headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json' // 'X-Requested-With': 'XMLHttpRequest'\n                            // 'Authorization': 'Bearer ' + this.state.clientToken,\n\n                          },\n                          withCredentials: true\n                        }).then(function (response) {\n                          if (response.status === 200) {\n                            response.json().then(function (data) {\n                              if (!cleanupFunction) setUserData(data);\n                            });\n                          }\n                        });\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }))();\n            }\n\n            return _context2.abrupt(\"return\", function () {\n              return cleanupFunction = true;\n            });\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), []);\n\n  var _useState2 = useState({\n    all: 0,\n    realMoney: 0,\n    futureMoney: 0,\n    active: 0\n  }),\n      counter = _useState2[0],\n      setCounter = _useState2[1];\n\n  useEffect(function () {\n    if (userData) {\n      (function () {\n        var active = 0;\n        var all = 0;\n        var realMoney = 0;\n        var futureMoney = 0;\n\n        var _loop = function _loop(value) {\n          if (userData[value]) {\n            userData[value].map(function (el) {\n              all++;\n\n              if (el.status === '1') {\n                active++;\n\n                if (value === 'first') {\n                  realMoney = realMoney + 10;\n                  futureMoney = futureMoney + 10;\n                } else if (value === 'second') {\n                  realMoney = realMoney + 5;\n                  futureMoney = futureMoney + 5;\n                } else if (value === 'third') {\n                  futureMoney = futureMoney + 3;\n                }\n              }\n            });\n          }\n        };\n\n        for (var value in userData) {\n          _loop(value);\n        }\n\n        setCounter({\n          all: all,\n          active: active,\n          realMoney: realMoney,\n          futureMoney: futureMoney\n        });\n      })();\n    }\n  }, [userData]);\n  return !mobile ? /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.refferalHead,\n    children: [/*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: {\n        tarif: 'Ваш пакет',\n        date: 'действителен до '\n      },\n      value: {\n        tarif: 'Standard',\n        date: user ? user.day_end : ''\n      },\n      type: \"tarif\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441\",\n      value: user ? user.money + ' y.e' : '0 y.e',\n      type: \"count\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u0420\\u0430\\u0441\\u0447\\u0435\\u0442\\u043D\\u044B\\u0439 \\u0434\\u043E\\u0445\\u043E\\u0434\",\n      value: counter.realMoney + ' y.e',\n      type: \"count\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u041F\\u0430\\u0440\\u0442\\u043D\\u0435\\u0440\\u044B\",\n      value: counter.active,\n      type: \"count\"\n    })]\n  }) : /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.refferalHeadMob,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Star', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: \"Standard\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0422\\u0430\\u0440\\u0438\\u0444\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Clock', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMobSmall,\n          children: user.day_end\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432. \\u0434\\u043E\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          style: {\n            'margin-right': '3px'\n          },\n          children: svgSprite('MoneyList', {\n            width: '13px',\n            height: '13px'\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMob,\n          children: \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441\"\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: user && user.money\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Money', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: counter.realMoney\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0414\\u043E\\u0445\\u043E\\u0434\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Users', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: counter.active\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u041F\\u0430\\u0440\\u0442\\u043D\\u0435\\u0440\\u044B\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default MainHead;","map":null,"metadata":{},"sourceType":"module"}