{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport HeaderItem from '../../../../widgets/headerOffice/HeaderItem';\nimport ContextApp from './../../../../context/App/ContextApp';\nimport { NET } from './../../../../network';\nimport useWindowDimensions from './../../../../global/utils';\nimport svgSprite from './../../../../project/svg/svgSprite';\n\nconst MainHead = ({\n  classes\n}) => {\n  const {\n    stateApp\n  } = useContext(ContextApp);\n  const user = stateApp.user;\n  const {\n    width\n  } = useWindowDimensions();\n  const mobile = width < 768 ? true : false;\n  const {\n    0: userData,\n    1: setUserData\n  } = useState(null);\n  useEffect(async () => {\n    let cleanupFunction = false;\n\n    if (user) {\n      (async () => {\n        fetch(`${NET.BACK_URL}/refferals/${user.id}`, {\n          method: 'GET',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json' // 'X-Requested-With': 'XMLHttpRequest'\n            // 'Authorization': 'Bearer ' + this.state.clientToken,\n\n          },\n          withCredentials: true\n        }).then(response => {\n          if (response.status === 200) {\n            response.json().then(data => {\n              if (!cleanupFunction) setUserData(data);\n            });\n          }\n        });\n      })();\n    }\n\n    return () => cleanupFunction = true;\n  }, []);\n  const {\n    0: counter,\n    1: setCounter\n  } = useState({\n    all: 0,\n    realMoney: 0,\n    futureMoney: 0,\n    active: 0\n  });\n  useEffect(() => {\n    if (userData) {\n      let active = 0;\n      let all = 0;\n      let realMoney = 0;\n      let futureMoney = 0;\n\n      for (let value in userData) {\n        if (userData[value]) {\n          userData[value].map(el => {\n            all++;\n\n            if (el.status === '1') {\n              active++;\n\n              if (value === 'first') {\n                realMoney = realMoney + 10;\n                futureMoney = futureMoney + 10;\n              } else if (value === 'second') {\n                realMoney = realMoney + 5;\n                futureMoney = futureMoney + 5;\n              } else if (value === 'third') {\n                futureMoney = futureMoney + 3;\n              }\n            }\n          });\n        }\n      }\n\n      setCounter({\n        all,\n        active,\n        realMoney,\n        futureMoney\n      });\n    }\n  }, [userData]);\n  return !mobile ? /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.refferalHead,\n    children: [/*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: {\n        tarif: 'Ваш пакет',\n        date: 'действителен до '\n      },\n      value: {\n        tarif: 'Standard',\n        date: user ? user.day_end : ''\n      },\n      type: \"tarif\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441\",\n      value: user ? user.money + ' y.e' : '0 y.e',\n      type: \"count\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u0420\\u0430\\u0441\\u0447\\u0435\\u0442\\u043D\\u044B\\u0439 \\u0434\\u043E\\u0445\\u043E\\u0434\",\n      value: counter.realMoney + ' y.e',\n      type: \"count\"\n    }), /*#__PURE__*/_jsx(HeaderItem, {\n      classes: classes,\n      svg: {\n        name: '',\n        styles: {}\n      },\n      title: \"\\u041F\\u0430\\u0440\\u0442\\u043D\\u0435\\u0440\\u044B\",\n      value: counter.active,\n      type: \"count\"\n    })]\n  }) : /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.refferalHeadMob,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Star', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: \"Standard\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0422\\u0430\\u0440\\u0438\\u0444\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Clock', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMobSmall,\n          children: user.day_end\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432. \\u0434\\u043E\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          style: {\n            'margin-right': '3px'\n          },\n          children: svgSprite('MoneyList', {\n            width: '13px',\n            height: '13px'\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMob,\n          children: \"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441\"\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: user && user.money\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Money', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: counter.realMoney\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u0414\\u043E\\u0445\\u043E\\u0434\"\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.refferalHeadItemMob,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: classes.refferalHeadItemWrapperMob,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          children: svgSprite('Users', {\n            width: '20px',\n            height: '20px'\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemNumberMob,\n          children: counter.active\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.refferalHeadItemTextMobSmall,\n          children: \"\\u041F\\u0430\\u0440\\u0442\\u043D\\u0435\\u0440\\u044B\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default MainHead;","map":null,"metadata":{},"sourceType":"module"}